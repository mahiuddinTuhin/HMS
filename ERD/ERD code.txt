users   [icon: user, color: red] {
  userId string pk
  username string
  password string
  needsPasswordChange boolean
  email string
  role string
  failed_login_attempts number
  last_login Date
  last_failed_login Date
  isDeleted boolean
}

// Admin will create by user controller
Admin   [icon: gcp-administration, color: green] {
    adminId string fk
    contactInfo Tcontacts
    education TEducation[]
    profileImage string
    personalInfo TPersonalInfo
   }



//admin will create the department
Department   [icon: azure-groups, color: gray] {
  departmentId string pk
  departmentName string
  allDoctors string[] fk
  allMedicalHistory string[] fk
  licences string
}

//admin will create the Laboratory
Laboratory   [icon: azure-collaborative-service, color: gray] {
  labId string pk
  labName string
  equipments string[]
  allStaff string[] fk
  testsOffers string[]
  contactInfo string
  allDiagnosisHistory string[] fk
}

// staff will create by user controller
Staff   [icon: gcp-web-security-scanner, color: yellow] {
  staffId string fk
  shift "day" | "night"
  contactInfo Tcontacts
  education TEducation[]
  personalInfo TPersonalInfo
}

// Doctor will create by user controller
Doctor   [icon: gcp-security-health-advisor, color: violet] {
  doctorId string fk
  schedule string[]
  pendingAppointments string[] fk
  allMedicalHistory string[] fk
  contactInfo Tcontacts
  departmentId string fk
  education TEducation[]
  license_info string[]
  personalInfo TPersonalInfo
}

// nurse will create by user controller
Nurse   [icon: gcp-support, color: purple] {
    nurseId string fk
    shift "day" | "night"
    contactInfo Tcontacts
    education TEducation[]
    personalInfo TPersonalInfo
   }


// doctor will create Appointments

Appointments   [icon: gcp-asset-inventory, color: gray] {
  appointmentId string pk
  doctorId string fk
  patientId string fk
  isPaid boolean
  isClosed boolean
  date Date
  schedule TSchedule
}

// Patient will be created by user controller
Patient   [icon: aws-personal-health-dashboard, color: blue] {
  patientId string fk
  allMedicalHistory string[] fk
  allAppointmentHistory string[] fk
  pendingAppointments string[] fk
  allDiagnosis string[] fk
  isAdmitted boolean
  currentMedicalDepartmentId string fk
  bills number
  contactNumber string
  emergencyContact string
  insuranceInfo string
  guardian TGuardian
  personalInfo TPersonalInfo
}


// lab staff will create diagnosis
Diagnosis   [icon: azure-load-test, color: gray] {
  diagnosisId string pk
  patientId string fk
  doctorId string fk
  labStaffId string fk
  diagnosisName string
  diagnosisDetails string[]
  charge number
  isPaid boolean
  testTime string
  reportTime string
}

// doctor  will create MedicalHistory
MedicalHistory   [icon: pie-chart, color: gray] {
  medicalHistoryId string pk
  doctorId string fk
  patientId string fk
  diagonosisId string[] fk
  medications string[]
  releasedOn string
  bill number
  doctorComments string
  patientComments string
}

users.userId < Admin.adminId
users.userId < Doctor.doctorId
users.userId < Nurse.nurseId
users.userId < Patient.patientId
users.userId < Staff.staffId


MedicalHistory.medicalHistoryId < Doctor.allMedicalHistory
MedicalHistory.medicalHistoryId < Patient.medicalHistoryId
Appointments.appointmentId < Doctor.appointmentId
Appointments.appointmentId < Patient.appointmentId

Laboratory.allStaff < Staff.staffId
Laboratory.diagnosisHistory < Diagnosis.diagnosisId

Department.allDoctors < Doctor.doctorId
Department.medicalHistoryId < MedicalHistory.medicalHistoryId
Doctor.departmentId < Department.departmentId


Diagnosis.patientId < Patient.patientId
Diagnosis.doctorId < Doctor.doctorId
Diagnosis.labStaffId < Staff.staffId
Diagnosis.adminId < Admin.adminId


Patient.currentMedicalDepartmentId < Department.departmentId
Patient.allDiagnosis < Diagnosis.diagnosisId